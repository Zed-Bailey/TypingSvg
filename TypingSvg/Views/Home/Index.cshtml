@{
    ViewData["Title"] = "Home Page";
}

<style>
    .bordered {
        border: 3px dashed red;
    }
</style>

<div class="container">
    <div class="row">
        <div class="col">
            <div class="mb-3">
                <label for="Width" class="form-label">Width</label>
                <input class="form-control" id="Width" placeholder="500" value="500">
            </div>
            <div class="mb-3">
                <label for="Height" class="form-label">Height</label>
                <input class="form-control" id="Height" placeholder="50" value="50">
            </div>
            
            <div class="mb-3">
                <label for="Lines" class="form-label">Lines</label>
                <textarea class="form-control" id="Lines" rows="3">Hello World</textarea>
            </div>
            
            <div class="d-inline mb-3">
                <div class="">
                    <label for="fontColour" class="form-label">Font Colour</label>
                    <input type="color" value="#36BCF7" id="fontColour" class="form-control form-control-color"/>
                </div>
                <div class="">
                    <label for="backgroundColour" class="form-label">Background Colour</label>
                    <input type="color" value="#00000000" id="backgroundColour" class="form-control form-control-color"/>
                </div>
            </div>
            
            
            <button onclick="generate()" class="btn btn-primary rounded-1">Generate</button>
            
            <div class="form-check">
                <label for="showBorder" class="form-check-label">Show Border</label>
                <input type="checkbox" id="showBorder" class="form-check-input"/>
            </div>
            
        </div>

        <div class="col">
            <div>
                <img id="generated" src="" alt="typing svg" class=""/>
            </div>
            <a id="generatedLink"></a>
        </div>
    </div>
</div>



<script type="text/javascript">
    window.addEventListener("load", () => {
        generate();
        let img = document.getElementById("generated");
        let borderToggle = document.getElementById("showBorder");
        borderToggle.addEventListener("change", () => {
            if (borderToggle.checked) {
                img.classList.add("bordered");
            } else {
                img.classList.remove("bordered");
            }
        });
    });
    
    

    // parse the input text, replaces spaces with '+' and seperates lines by ';'
    function parseLines () {
        let textArea = document.getElementById("Lines");
        let text = textArea.value.replace(' ', '+').split('\n');
        return text.join(';');
    }

    function generate() {
        let ele = document.getElementById("generated");
        
        let lines = parseLines();
        
        //
        let width = document.getElementById("Width").value;
        let height = document.getElementById("Height").value;
        let fontColour = document.getElementById("fontColour").value.replace('#', '');
        let backgroundColour = document.getElementById("backgroundColour").value.replace('#', '');
        
        let link = `/Typing?height=${height}&width=${width}&Lines=${lines}&fontColour=${fontColour}&backgroundColour=${backgroundColour}`;
        ele.src = link;
        document.getElementById("generatedLink").innerHTML = link;
        document.getElementById("generatedLink").href = link;
        
    }


</script>